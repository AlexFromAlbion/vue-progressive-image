/*!
 * vue-progressive-image v1.3.2
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.VueProgressiveImage=n()}(this,function(){"use strict";function e(e,n){if("undefined"==typeof document)return n;e=e||"";var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i),n}var n=function(e){return"undefined"!=typeof e&&null!==e},t={props:{src:{type:String,required:!0},placeholder:{type:String,required:!1},blur:{type:Number,required:!1}},data:function(){return{applyRatio:!0,options:{},defaultBlur:5,image:null,placeholderImage:null,aspectRatio:.5625,isPollingKilled:!1,cached:!1}},computed:{shouldPlaceholderRender:function(){return!!this.placeholderImage},shouldImageRender:function(){return!!this.image},wrapperStyle:function(){if(this.applyRatio)return{paddingBottom:100*this.aspectRatio+"%"}},blurStyle:function(){var e=this.defaultBlur;return n(this.blur)?this.getBlurStyle(this.blur):n(this.options.blur)?this.getBlurStyle(this.options.blur):this.getBlurStyle(e)}},created:function(){this.handleImageLoading()},methods:{getBlurStyle:function(e){if(0!==e)return{filter:"blur("+e+"px)"}},defineAspectRatio:function(e){var n=this,t=this.options.timeout||2500,i=this.options.pollInterval||80,o=setInterval(function(){if(e.naturalWidth){clearInterval(o);var t=e.naturalHeight,i=e.naturalWidth;n.aspectRatio=t/i}},i);setTimeout(function(){e.naturalWidth||(clearInterval(o),n.isPollingKilled=!0)},t)},loadImage:function(){var e=this,n=new Image,t=this.options.delay||0;this.defineAspectRatio(n),n.onload=setTimeout(function(){e.image||(e.isPollingKilled&&e.defineAspectRatio(n),e.image=n.src)},t),n.src=this.src,this.cached=n.complete},loadPlaceholder:function(){var e=this;if(this.placeholder||this.options.placeholder){var n=new Image,t=this.placeholder;this.options.placeholder&&!this.placeholder&&(t=this.options.placeholder),n.onload=function(){e.placeholderImage=t},n.src=t}},handleImageLoading:function(){this.loadPlaceholder(),this.loadImage()}}},i='<div :class="style.component">\n  <div :style="wrapperStyle">\n    <transition :enter-class="style.enter" :enter-active-class="style.before">\n      <img v-if="shouldImageRender" :class="style.image" :src="image" :alt="alt">\n    </transition>\n    <transition :enter-class="style.enter" :enter-active-class="style.before">\n      <img v-if="shouldPlaceholderRender" :class="shouldImageRender ? style.out : style.placeholder" :style="blurStyle" :src="placeholderImage">\n    </transition>\n  </div>\n</div>\n',o=e("._component_8fn4g_1 {\n  position: relative;\n  overflow: hidden;\n}\n\n._image_8fn4g_6 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n  transition: all 1s ease-out;\n  transform: translateZ(0);\n}\n\n._before_8fn4g_16 {\n  opacity: 1;\n}\n\n._enter_8fn4g_20 {\n  opacity: 0;\n}\n\n._placeholder_8fn4g_24 {\n  z-index: 0;\n  overflow: hidden;\n  transition: all 500ms ease-out;\n  backface-visibility: hidden;\n  transform: scale(1);\n}\n\n._out_8fn4g_33 {\n  transition: all 500ms ease-out 900ms;\n  opacity: 0;\n}\n",{component:"_component_8fn4g_1",image:"_image_8fn4g_6",before:"_before_8fn4g_16",enter:"_enter_8fn4g_20",placeholder:"_placeholder_8fn4g_24 _image_8fn4g_6",out:"_out_8fn4g_33 _placeholder_8fn4g_24 _image_8fn4g_6"}),l=function(e){return{name:"progressive-img",template:i,props:{alt:{type:String,required:!1}},mixins:[t],data:function(){return{options:e,style:o}}}},r='<div :class="style.component" :style="wrapperStyle">\n  <transition :enter-class="style.enter" :enter-active-class="style.before">\n    <div v-if="shouldImageRender" :class="style.image" :style="imageStyle"></div>\n  </transition>\n\n  <transition :enter-class="style.enter" :enter-active-class="style.before">\n    <div v-if="shouldPlaceholderRender" :class="style.placeholder" :style="placeholderStyle"></div>\n  </transition>\n</div>\n',a=e("._component_1q63l_1 {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n._image_1q63l_8 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  transition: all 1s ease-out;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  transform: translateZ(0);\n}\n\n._placeholder_1q63l_22 {\n  transform: scale(1);\n  z-index: 0;\n}\n\n._before_1q63l_28 {\n  opacity: 1;\n}\n\n._enter_1q63l_32 {\n  opacity: 0;\n}\n",{component:"_component_1q63l_1",image:"_image_1q63l_8",placeholder:"_placeholder_1q63l_22 _image_1q63l_8",before:"_before_1q63l_28",enter:"_enter_1q63l_32"}),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},c=function(e){return{name:"progressive-background",template:r,props:{noRatio:{type:Boolean,required:!1}},mixins:[t],data:function(){return{style:a,options:e,applyRatio:!this.noRatio}},computed:{imageStyle:function(){return{backgroundImage:"url("+this.image+")"}},placeholderStyle:function(){return s({},this.blurStyle,{backgroundImage:"url("+this.placeholderImage+")"})}}}},d=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component("progressive-img",l(n)),e.component("progressive-image",l(n)),e.component("progressive-background",c(n))},u={install:d};return u});