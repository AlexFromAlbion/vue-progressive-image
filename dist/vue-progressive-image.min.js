/*!
 * vue-progressive-image v1.3.1
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueProgressiveImage=t()}(this,function(){"use strict";function e(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),n.appendChild(i),t}var t=function(e){return"undefined"!=typeof e&&null!==e},n={props:{src:{type:String,required:!0},placeholder:{type:String,required:!1},blur:{type:Number,required:!1}},data:function(){return{applyRatio:!0,options:{},defaultBlur:5,image:null,placeholderImage:null,aspectRatio:.5625,isPollingKilled:!1,cached:!1}},computed:{shouldPlaceholderRender:function(){return!!this.placeholderImage},shouldImageRender:function(){return!!this.image},wrapperStyle:function(){if(this.applyRatio)return{paddingBottom:100*this.aspectRatio+"%"}},blurStyle:function(){var e=this.defaultBlur;return this.shouldImageRender?this.getBlurStyle(0):t(this.blur)?this.getBlurStyle(this.blur):t(this.options.blur)?this.getBlurStyle(this.options.blur):this.getBlurStyle(e)}},created:function(){this.handleImageLoading()},methods:{getBlurStyle:function(e){if(0!==e)return{filter:"blur("+e+"px)"}},defineAspectRatio:function(e){var t=this,n=this.options.timeout||2500,i=this.options.pollInterval||80,o=setInterval(function(){if(e.naturalWidth){clearInterval(o);var n=e.naturalHeight,i=e.naturalWidth;t.aspectRatio=n/i}},i);setTimeout(function(){e.naturalWidth||(clearInterval(o),t.isPollingKilled=!0)},n)},loadImage:function(){var e=this,t=new Image,n=this.options.delay||0;this.defineAspectRatio(t),t.onload=setTimeout(function(){e.image||(e.isPollingKilled&&e.defineAspectRatio(t),e.image=t.src)},n),t.src=this.src,this.cached=t.complete},loadPlaceholder:function(){var e=this;if(this.placeholder||this.options.placeholder){var t=new Image,n=this.placeholder;this.options.placeholder&&!this.placeholder&&(n=this.options.placeholder),t.onload=function(){e.placeholderImage=n},t.src=n}},handleImageLoading:function(){this.loadPlaceholder(),this.loadImage()}}},i='<div :class="style.component">\n  <div :style="wrapperStyle">\n    <transition :enter-class="style.enter" :enter-active-class="style.before">\n      <img v-if="shouldImageRender" :class="style.image" :src="image" :alt="alt">\n    </transition>\n    <transition :enter-class="style.enter" :enter-active-class="style.before">\n      <img v-if="shouldPlaceholderRender" :class="style.placeholder" :style="blurStyle" :src="placeholderImage">\n    </transition>\n  </div>\n</div>\n',o=e("._component_14i8g_1 {\n  position: relative;\n  overflow: hidden;\n}\n\n._image_14i8g_6 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n  transition: all 1s ease-out;\n  transform: translateZ(0);\n}\n\n._before_14i8g_16 {\n  opacity: 1;\n}\n\n._enter_14i8g_20 {\n  opacity: 0;\n}\n\n._placeholder_14i8g_24 {\n  z-index: 0;\n  overflow: hidden;\n  transition: all 500ms ease-out;\n  backface-visibility: hidden;\n  transform: scale(1);\n}\n",{component:"_component_14i8g_1",image:"_image_14i8g_6",before:"_before_14i8g_16",enter:"_enter_14i8g_20",placeholder:"_placeholder_14i8g_24 _image_14i8g_6"}),l=function(e){return{name:"progressive-img",template:i,props:{alt:{type:String,required:!1}},mixins:[n],data:function(){return{options:e,style:o}}}},r='<div :class="style.component" :style="wrapperStyle">\n  <transition :enter-class="style.enter" :enter-active-class="style.before">\n    <div v-if="shouldImageRender" :class="style.image" :style="imageStyle"></div>\n  </transition>\n\n  <transition :enter-class="style.enter" :enter-active-class="style.before">\n    <div v-if="shouldPlaceholderRender" :class="style.placeholder" :style="placeholderStyle"></div>\n  </transition>\n</div>\n',a=e("._component_1q63l_1 {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n._image_1q63l_8 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  transition: all 1s ease-out;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  transform: translateZ(0);\n}\n\n._placeholder_1q63l_22 {\n  transform: scale(1);\n  z-index: 0;\n}\n\n._before_1q63l_28 {\n  opacity: 1;\n}\n\n._enter_1q63l_32 {\n  opacity: 0;\n}\n",{component:"_component_1q63l_1",image:"_image_1q63l_8",placeholder:"_placeholder_1q63l_22 _image_1q63l_8",before:"_before_1q63l_28",enter:"_enter_1q63l_32"}),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(e){return{name:"progressive-background",template:r,props:{noRatio:{type:Boolean,required:!1}},mixins:[n],data:function(){return{style:a,options:e,applyRatio:!this.noRatio}},computed:{imageStyle:function(){return{backgroundImage:"url("+this.image+")"}},placeholderStyle:function(){return s({},this.blurStyle,{backgroundImage:"url("+this.placeholderImage+")"})}}}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component("progressive-img",l(t)),e.component("progressive-image",l(t)),e.component("progressive-background",c(t))},p={install:d};return p});