/*!
 * vue-progressive-image v0.0.1
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueProgressiveImage=t()}(this,function(){"use strict";function e(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),n.appendChild(a),t}var t='<div :class="style.component">\n  <div :style="wrapperStyle">\n    <transition :enter-class="style.enter" :enter-active-class="style.before">\n      <img v-if="shouldImageRender" :class="style.image" :src="image" :alt="alt">\n    </transition>\n    <img v-if="shouldPlaceholderRender" :class="style.placeholder" :style="placeholderStyle" :src="placeholderImage">\n  </div>\n</div>\n',n=e("._component_1rttq_1 {\n  position: relative;\n  overflow: hidden;\n}\n\n._image_1rttq_6 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n  transition: opacity 1s;\n  backface-visibility: hidden;\n}\n\n._before_1rttq_16 {\n  opacity: 1;\n}\n\n._enter_1rttq_20 {\n  opacity: 0;\n}\n\n._placeholder_1rttq_24 {\n  z-index: 0;\n\n  /* this is needed so Safari keeps sharp edges */\n  transform: scale(1)\n}\n",{component:"_component_1rttq_1",image:"_image_1rttq_6",before:"_before_1rttq_16",enter:"_enter_1rttq_20",placeholder:"_placeholder_1rttq_24 _image_1rttq_6"}),a={name:"progressive-image",template:t,props:{source:{type:String,required:!0},placeholder:{type:String,required:!1},fadeSpeed:{type:Number,default:1},blur:{type:Number,default:5},alt:{type:String,required:!1}},data:function(){return{style:n,image:null,placeholderImage:null,aspectRatio:56.25}},computed:{shouldPlaceholderRender:function(){return this.placeholder&&this.placeholderImage},shouldImageRender:function(){return this.image},wrapperStyle:function(){return{paddingBottom:this.aspectRatio+"%"}},placeholderStyle:function(){return 0===this.blur?{}:{filter:"blur("+this.blur+"px)"}}},created:function(){this.handleImageLoading()},methods:{defineAspectRatio:function(e){var t=this,n=setInterval(function(){if(e.naturalWidth){clearInterval(n);var a=e.naturalHeight,r=e.naturalWidth;t.aspectRatio=a/r*100}},100)},loadImage:function(){var e=this,t=new Image;this.defineAspectRatio(t),t.onload=function(){e.image=e.source},t.src=this.source},loadPlaceholder:function(){var e=this,t=new Image;t.onload=function(){e.placeholderImage=e.placeholder},t.src=this.placeholder},handleImageLoading:function(){this.placeholder&&this.loadPlaceholder(),this.loadImage()}}},r=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component("progressive-image",a)},i={install:r};return i});